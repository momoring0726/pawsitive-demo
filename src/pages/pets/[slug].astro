---
// src/pages/pets/[slug].astro
import { Image } from 'astro:assets'; // Import Astro's Image component
import MainLayout from '../../layouts/MainLayout.astro';
import { pets } from '../../data/pets.js';

// Define the shape of one pet
interface Pet {
  id: number;
  slug: string;
  name: string;
  breed: string;
  age: string;
  gender: string;
  size: string;
  bio: string;
  goodWith: {
    kids: boolean;
    dogs: boolean;
    cats: boolean;
  };
  // This type is changed to 'any' to accept the imported image module
  images: any[]; 
}

// The 'Props' interface is no longer needed; Astro infers it.

// This function tells Astro which pages to build
export async function getStaticPaths() {
  return pets.map((pet) => {
    return {
      params: { slug: pet.slug }, // This must match the file name [slug].astro
      props: { pet }, // This passes the pet object to the component
    };
  });
}

// Get the specific pet data for this page
const { pet } = Astro.props;
---

<MainLayout title={pet.name}>
  <div class="container mx-auto max-w-6xl p-8 py-12">
    <div class="grid grid-cols-1 md:grid-cols-5 md:gap-10">
      
      <div class="md:col-span-2">
        <Image 
          src={pet.images[0]} 
          alt={`Photo of ${pet.name}`} 
          class="aspect-square w-full rounded-lg object-cover shadow-xl border-4 border-white"
          widths={[400, 800]}
          sizes="(max-width: 768px) 100vw, 400px"
          format="webp"
        />
        </div>

      
      <div class="md:col-span-3 pt-8 md:pt-0">
        
        <h1 class="text-5xl font-bold text-gray-800">{pet.name}</h1>
        
        <p class="mt-2 text-2xl font-light text-gray-600">
          {pet.breed}
        </p>
        <p class="mt-4 flex gap-x-4 text-lg">
          <span class="inline-block rounded-full bg-blue-100 px-4 py-1 text-blue-800">
            {pet.age}
          </span>
          <span class="inline-block rounded-full bg-blue-100 px-4 py-1 text-blue-800">
            {pet.gender}
          </span>
          <span class="inline-block rounded-full bg-blue-100 px-4 py-1 text-blue-800">
            {pet.size}
          </span>
        </p>

        <div class="mt-8">
          <h2 class="text-2xl font-semibold text-gray-700">About {pet.name}</h2>
          <p class="mt-2 text-lg text-gray-600">{pet.bio}</p>
        </div>

        <div class="mt-8 rounded-lg border border-gray-200 bg-white p-6 shadow-sm">
          <h3 class="text-2xl font-semibold text-gray-700">Good With:</h3>
          <ul class="mt-4 space-y-3 text-lg">
            
            <li class="flex items-center gap-x-3">
              <i class:list={[
                "fa-solid w-6 text-center text-lg",
                pet.goodWith.kids ? "fa-check text-emerald-600" : "fa-xmark text-red-500"
              ]}></i>
              <span class="text-gray-600">Kids</span>
            </li>
            
            <li class="flex items-center gap-x-3">
              <i class:list={[
                "fa-solid w-6 text-center text-lg",
                pet.goodWith.dogs ? "fa-check text-emerald-600" : "fa-xmark text-red-500"
              ]}></i>
              <span class="text-gray-600">Other Dogs</span>
            </li>
            
             <li class="flex items-center gap-x-3">
              <i class:list={[
                "fa-solid w-6 text-center text-lg",
                pet.goodWith.cats ? "fa-check text-emerald-600" : "fa-xmark text-red-500"
              ]}></i>
              <span class="text-gray-600">Cats</span>
            </li>
            
          </ul>
        </div>
        
        <a 
          href="/contact" 
          class="mt-8 inline-block w-full rounded-full bg-blue-600 px-10 py-4 text-center text-xl font-semibold text-white shadow-lg transition duration-300 ease-in-out hover:scale-105 hover:bg-blue-700 md:w-auto"
        >
          Interested in {pet.name}? Contact Us!
        </a>
      </div>

    </div>
  </div>
</MainLayout>